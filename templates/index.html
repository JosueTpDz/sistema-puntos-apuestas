<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üé∞ MBL CASA APUESTAS - Sistema Integral</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Efecto de part√≠culas de fondo -->
    <div class="particles-bg"></div>

    <div class="container">
        <!-- Secci√≥n de Login -->
        <div id="loginSection" class="login-wrapper">
            <div class="header">
                <h1 class="main-title">üé∞ MBL CASA APUESTAS</h1>
                <p class="subtitle">Sistema Integral de Gesti√≥n</p>
            </div>

            <div class="login-section">
                <h3 class="section-title">Iniciar Sesi√≥n</h3>
                <form id="loginForm" class="login-form">
                    <div class="form-group">
                        <label for="username">Usuario:</label>
                        <select id="username" required class="form-control">
                            <option value="">Seleccione un usuario</option>
                            <option value="admin">üîë Administrador</option>
                            <option value="user1">üë§ Operador 1</option>
                            <option value="user2">üë§ Operador 2</option>
                            <option value="user3">üë§ Operador 3</option>
                            <option value="user4">üë§ Operador 4</option>
                            <option value="user5">üë§ Operador 5</option>
                            <option value="user6">üë§ Operador 6</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="password">Contrase√±a:</label>
                        <input type="password" id="password" required class="form-control">
                    </div>
                    <button type="submit" class="btn btn-primary">
                        <span class="btn-icon">üîê</span> Ingresar
                    </button>
                    <div id="loginError" class="error-message hidden"></div>
                </form>
            </div>
        </div>

        <!-- Dashboard Principal -->
        <div id="dashboard" class="dashboard hidden">
            <!-- Header del Dashboard -->
            <div class="dashboard-header">
                <div class="user-info">
                    <div class="user-details">
                        <h2 id="welcomeMessage" class="welcome-text"></h2>
                        <p id="userRole" class="user-role"></p>
                    </div>
                    <button onclick="logout()" class="btn btn-danger">
                        <span class="btn-icon">üö™</span> Cerrar Sesi√≥n
                    </button>
                </div>

                <!-- Estad√≠sticas Generales -->
                <div class="stats-overview">
                    <div class="stat-card">
                        <div class="stat-icon">üë•</div>
                        <div class="stat-content">
                            <div class="stat-number" id="totalClientsCount">0</div>
                            <div class="stat-label">Clientes</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üí∞</div>
                        <div class="stat-content">
                            <div class="stat-number" id="totalCanjesCount">0</div>
                            <div class="stat-label">Canjes</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">‚≠ê</div>
                        <div class="stat-content">
                            <div class="stat-number" id="totalPointsCount">0</div>
                            <div class="stat-label">Puntos</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üèÜ</div>
                        <div class="stat-content">
                            <div class="stat-number" id="totalPrizesCount">0</div>
                            <div class="stat-label">Premios</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Navegaci√≥n por Tabs -->
            <div class="tabs-navigation">
                <button class="tab-btn active" onclick="showTab('clients')" data-tab="clients">
                    <span class="tab-icon">üë•</span> Clientes
                </button>
                <button class="tab-btn" onclick="showTab('canjes')" data-tab="canjes">
                    <span class="tab-icon">üí∞</span> Canjes
                </button>
                <button class="tab-btn" onclick="showTab('points')" data-tab="points">
                    <span class="tab-icon">‚≠ê</span> Puntos
                </button>
                <button class="tab-btn" onclick="showTab('prizes')" data-tab="prizes">
                    <span class="tab-icon">üèÜ</span> Premios
                </button>
                <button class="tab-btn hidden admin-only" onclick="showTab('admin')" data-tab="admin">
                    <span class="tab-icon">üîß</span> Admin
                </button>
            </div>

            <!-- Contenido de Tabs -->
            <div class="tab-contents">
                <!-- Tab Clientes -->
                <div id="clientsTab" class="tab-content active">
                    <div class="section-container">
                        <div class="section-header">
                            <h3 class="section-title">üë• Gesti√≥n de Clientes</h3>
                        </div>
                        
                        <div class="form-section">
                            <form id="clientForm" class="client-form">
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="clientName">Nombre Completo:</label>
                                        <input type="text" id="clientName" required class="form-control">
                                    </div>
                                    <div class="form-group">
                                        <label for="clientDNI">DNI:</label>
                                        <input type="text" id="clientDNI" required pattern="[0-9]{8}" class="form-control">
                                    </div>
                                    <div class="form-group">
                                        <label for="clientPhone">Tel√©fono:</label>
                                        <input type="tel" id="clientPhone" required class="form-control">
                                    </div>
                                    <div class="form-group">
                                        <label for="initialPoints">Puntos Iniciales:</label>
                                        <input type="number" id="initialPoints" min="0" value="0" class="form-control">
                                    </div>
                                </div>
                                <button type="submit" class="btn btn-success">
                                    <span class="btn-icon">‚ûï</span> Agregar Cliente
                                </button>
                            </form>
                            <div id="clientMessage" class="message hidden"></div>
                        </div>

                        <div id="clientsList" class="items-list"></div>
                    </div>
                </div>

                <!-- Tab Canjes -->
                <div id="canjesTab" class="tab-content">
                    <div class="section-container">
                        <div class="section-header">
                            <h3 class="section-title">üí∞ Registro de Canjes</h3>
                        </div>
                        
                        <div class="form-section">
                            <form id="canjeForm" class="client-form">
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="canjeClient">Cliente:</label>
                                        <select id="canjeClient" required class="form-control">
                                            <option value="">Seleccione un cliente</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label for="canjeAmount">Monto del Canje:</label>
                                        <input type="number" id="canjeAmount" required min="0" step="0.01" class="form-control">
                                    </div>
                                    <div class="form-group">
                                        <label for="canjeDescription">Descripci√≥n:</label>
                                        <input type="text" id="canjeDescription" required class="form-control">
                                    </div>
                                </div>
                                <button type="submit" class="btn btn-success">
                                    <span class="btn-icon">üí≥</span> Registrar Canje
                                </button>
                            </form>
                            <div id="canjeMessage" class="message hidden"></div>
                        </div>

                        <div id="canjesList" class="items-list"></div>
                    </div>
                </div>

                <!-- Tab Puntos -->
                <div id="pointsTab" class="tab-content">
                    <div class="section-container">
                        <div class="section-header">
                            <h3 class="section-title">‚≠ê Gesti√≥n de Puntos</h3>
                        </div>
                        
                        <div class="form-section">
                            <form id="pointsForm" class="client-form">
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="pointsClient">Cliente:</label>
                                        <select id="pointsClient" required class="form-control">
                                            <option value="">Seleccione un cliente</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label for="pointsAmount">Puntos a Agregar/Quitar:</label>
                                        <input type="number" id="pointsAmount" required class="form-control">
                                    </div>
                                    <div class="form-group">
                                        <label for="pointsReason">Raz√≥n:</label>
                                        <input type="text" id="pointsReason" required class="form-control">
                                    </div>
                                </div>
                                <div class="form-row">
                                    <button type="submit" class="btn btn-success" data-action="add">
                                        <span class="btn-icon">‚ûï</span> Agregar Puntos
                                    </button>
                                    <button type="button" class="btn btn-warning" onclick="subtractPoints()">
                                        <span class="btn-icon">‚ûñ</span> Quitar Puntos
                                    </button>
                                </div>
                            </form>
                            <div id="pointsMessage" class="message hidden"></div>
                        </div>

                        <div id="pointsHistory" class="items-list"></div>
                    </div>
                </div>

                <!-- Tab Premios -->
                <div id="prizesTab" class="tab-content">
                    <div class="section-container">
                        <div class="section-header">
                            <h3 class="section-title">üèÜ Gesti√≥n de Premios</h3>
                        </div>
                        
                        <div class="form-section">
                            <form id="prizeForm" class="client-form">
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="prizeName">Nombre del Premio:</label>
                                        <input type="text" id="prizeName" required class="form-control">
                                    </div>
                                    <div class="form-group">
                                        <label for="prizePoints">Puntos Requeridos:</label>
                                        <input type="number" id="prizePoints" required min="1" class="form-control">
                                    </div>
                                    <div class="form-group">
                                        <label for="prizeDescription">Descripci√≥n:</label>
                                        <input type="text" id="prizeDescription" class="form-control">
                                    </div>
                                </div>
                                <button type="submit" class="btn btn-success">
                                    <span class="btn-icon">üéÅ</span> Agregar Premio
                                </button>
                            </form>
                            <div id="prizeMessage" class="message hidden"></div>
                        </div>

                        <div id="prizesList" class="items-list"></div>
                    </div>
                </div>

                <!-- Tab Admin -->
                <div id="adminTab" class="tab-content">
                    <div class="section-container">
                        <div class="section-header">
                            <h3 class="section-title">üîß Panel de Administraci√≥n</h3>
                        </div>
                        
                        <div class="admin-overview">
                            <div class="admin-section">
                                <h4>üìä Estad√≠sticas Generales</h4>
                                <div class="admin-stats">
                                    <div class="admin-stat-item">
                                        <span>Total Clientes Sistema:</span>
                                        <span id="adminTotalClients">0</span>
                                    </div>
                                    <div class="admin-stat-item">
                                        <span>Total Canjes Sistema:</span>
                                        <span id="adminTotalCanjes">0</span>
                                    </div>
                                    <div class="admin-stat-item">
                                        <span>Monto Total Canjeado:</span>
                                        <span id="adminTotalAmount">S/ 0.00</span>
                                    </div>
                                    <div class="admin-stat-item">
                                        <span>Puntos Totales en Circulaci√≥n:</span>
                                        <span id="adminTotalPoints">0</span>
                                    </div>
                                </div>
                            </div>

                            <div class="admin-section">
                                <h4>üë• Resumen por Usuario</h4>
                                <div id="adminUserStats" class="admin-user-list"></div>
                            </div>

                            <div class="admin-section">
                                <h4>üèÜ Canjes de Premios Recientes</h4>
                                <div id="adminRecentRedeems" class="admin-activity-list"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal para Canje de Premios -->
    <div id="redeemModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>üéä Canjear Premio</h3>
                <span class="modal-close" onclick="closeRedeemModal()">&times;</span>
            </div>
            <div class="modal-body">
                <p id="redeemMessage"></p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-success" onclick="confirmPrizeRedeem()">
                    <span class="btn-icon">‚úÖ</span> Confirmar
                </button>
                <button class="btn btn-secondary" onclick="closeRedeemModal()">
                    <span class="btn-icon">‚ùå</span> Cancelar
                </button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>